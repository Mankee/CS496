var database = require('database');
var userInterface = require('userInterface');
var net = require('net');

var mainWindow = userInterface.createMainWindow();
mainWindow.refresh(database.listEntries());

mainWindow.addEventListener('add', function() {
	var addWindow = userInterface.createAddWindow();
	addWindow.addEventListener('save', function(e) {
		addWindow.close();
		database.saveEntry(e.entry);
		mainWindow.refresh(database.listEntries());
	});
	addWindow.open();
});
mainWindow.open();

net.sendWhenPossible(database);