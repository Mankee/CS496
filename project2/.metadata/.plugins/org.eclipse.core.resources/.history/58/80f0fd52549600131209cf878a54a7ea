var database = require('database');
var userInterface = require('userInterface');
var network = require('network');

var mainWindow = userinterface.createMainWindow();
mainWindow.refresh(database.listEntries());

mainWindow.addEventListener('add', function() {
	var addWindow = userinterface.createAddWindow();
	addWindow.addEventListener('save', function(e) {
		addWindow.close();
		database.saveEntry(e.entry);
		mainWindow.refresh(db.listEntries());
	});
	addWindow.open();
});
mainWindow.open();

net.sendWhenPossible(database);